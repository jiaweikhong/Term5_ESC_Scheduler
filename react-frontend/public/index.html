<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta name="theme-color" content="#000000" />
  <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />

  <title>SUTD Timetable Scheduler</title>
  <script type="text/javascript">
    window.user = "{{ user }}"
    window.pillar = "{{ pillar }}"

    switch (window.pillar) {
      case 'Freshmore':
        window.pillarcourses = ['Fresh1', 'Fresh2', 'Fresh3'];
        break;
      case 'ISTD':
        window.pillarcourses = ['50.001', '50.002', '50.003', '50.005', '50.034'];
        break;
      case 'EPD':
        window.pillarcourses = ['30.007', '30.101', '30.102'];
        break;
      case 'ESD':
        window.pillarcourses = ['ESD1', 'ESD2', 'ESD3'];
        break;
      case 'ASD':
        window.pillarcourses = ['ASD1', 'ASD2', 'ASD3'];
        break;
    }

    window.errornotif = "{{ error }}";
    window.notif = "{{ notif }}"

    // window.data = [
    //   ["ISTD", 50.003, "Elements of Software Construction", "Sun Jun", "Sudipta Chattopadhyay"],
    //   ["rqcww", 50.005, "Computer Systems Engineering", "David Yau", "Natalie Agus"],
    //   ["haha", 50.034, "Introduction to Probability and Statistics", "Tony Quek", "Gemma Roig, Cong Kai Fong Ernest"],
    //   ["Freshmore", 10.004, "Advanced Math II", "Sergey Kushnarev", "Wang XinYin"],
    //   ["hehe", "01.010", "Freshmore Writing Programme", "Pang Yang Hui", "Eunice Leong"]
    // ]

    window.unparsedtoken = "{{ token }}";
    window.unparsedtoken = window.unparsedtoken.replace(/&#39;/g, "\"");
    if (window.unparsedtoken != "") {
      window.parsedtoken = JSON.parse(unparsedtoken);
    }

    window.unparsedCoursesInfo = "{{ coursesInfo }}";
    window.unparsedCoursesInfo = window.unparsedCoursesInfo.replace(/&#39;/g, "\"");
    window.unparsedCoursesInfo = window.unparsedCoursesInfo.replace(/False/g, "\"false\"");
    window.unparsedCoursesInfo = window.unparsedCoursesInfo.replace(/True/g, "\"true\"");
    // console.log(window.unparsedCoursesInfo)
    if (window.unparsedCoursesInfo != "") {
      window.parsedCoursesInfo = JSON.parse(window.unparsedCoursesInfo)
      window.data = []
      for (var id in parsedCoursesInfo) {  // id is the courseID eg. 50.001, 50.002 etc
        oneCourse = []
        oneCourse.push(parsedCoursesInfo[id]['Pillar'])
        oneCourse.push(id)
        oneCourse.push(parsedCoursesInfo[id]['CourseTitle'])
        oneCourse.push(parsedCoursesInfo[id]['CourseLead'])
        instructors = ""
        for (i = 0; i < parsedCoursesInfo[id]['Instructors'].length; i++) {
          instructors += parsedCoursesInfo[id]['Instructors'][i]
          instructors += ", "
        }
        instructors = instructors.substring(0, instructors.length - 2)
        oneCourse.push(instructors)
        // console.log(oneCourse)
        window.data.push(oneCourse)
      }
      // console.log(window.data)
    }

  </script>
</head>

<body>
  <!-- <noscript>You need to enable JavaScript to run this app.</noscript> -->
  <div id="root"></div>
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
</body>

</html>